#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# 提交信息格式验证
commit_msg=$(cat "$1")
commit_regex="^(feat|fix|docs|style|refactor|perf|test|chore|revert)(\(.+\))?: .{1,100}"

if ! echo "$commit_msg" | grep -qE "$commit_regex"; then
  echo ""
  echo "错误: 提交信息格式不正确!"
  echo ""
  echo "正确格式: <type>(<scope>): <subject>"
  echo ""
  echo "type 类型:"
  echo "  feat     - 新功能"
  echo "  fix      - Bug 修复"
  echo "  docs     - 文档更新"
  echo "  style    - 代码格式"
  echo "  refactor - 代码重构"
  echo "  perf     - 性能优化"
  echo "  test     - 测试相关"
  echo "  chore    - 构建/工具"
  echo "  revert   - 回滚提交"
  echo ""
  echo "示例: feat(user): 添加用户登录功能"
  echo ""
  exit 1
fi
